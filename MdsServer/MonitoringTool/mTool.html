<!DOCTYPE html>
<html>
  <head>
   <title>MDS Monitoring-Tool</title>
     <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
       #panel {
        position: absolute;
        top: 5px;
        left: 50%;
        margin-left: -180px;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
      }
    </style>
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.0/css/jquery.dataTables.css">
    <link rel="stylesheet" type="text/css" href="dropDown.css" />
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script type="text/javascript" src="Whiteboard.js"></script>
    <script type="text/javascript" src="map.js"></script>
    <script type="text/javascript" src="prototype.js"></script>
    <script type="text/javascript" src="dropDownMenu.js"></script>
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script src="//cdn.datatables.net/1.10.0/js/jquery.dataTables.js"></script>

    <script type="text/javascript">
        document.observe("dom:loaded", function() {
            function log(text) {
                $("log").innerHTML = (new Date).getTime() + ": " + (!Object.isUndefined(text) && text !== null ? text.escapeHTML() : "null") + $("log").innerHTML;
            }

            if (!window.WebSocket) {
                alert("FATAL: WebSocket not natively supported. This demo will not work!");
            }

            var ws;
        	this.whiteboard = new Whiteboard();


            //Aufbau der Websocketverbindung
                ws = new WebSocket("ws://feijnox.no-ip.org:8000");
                ws.onopen = function() {
                    log("[WebSocket#onopen]\n");
                }
                ws.onmessage = function(e) {
                    log("[WebSocket#onmessage] Message: '" + e.data + "'\n");
                    var message = e.data;
                    if(message.startsWith("{")){
	   					obj = JSON.parse(message);
	   					if(!obj.path === null){
	   						var changings = obj.path;
	   					}
		
	   					//Updatefunktion zur aktualisierung der Standortdaten der Spieler
	       				this. whiteboard = update(changings, this.whiteboard);
       				}	
   				}
                ws.onclose = function() {
                    log("[WebSocket#onclose]\n");
                }
            });



    </script>
  </head>
  <body>
  	<h1>MDS-Monitoring Tool</>
    <div id="map-canvas" style= "width:900px; height:500px"> </div>
      <!--  <div id="panel">

      <input onclick="deletePlayers();" type=button value="Delete Players">-->
    </div>
      <form><textarea id="log" rows="30" cols="100" style="font-family:monospace; color:red;"></textarea></form><br>

  </body>
</html>